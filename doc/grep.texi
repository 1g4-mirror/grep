\input texinfo  @c -*-texinfo-*-
@c %**start of header
@setfilename grep.info
@settitle grep, print lines matching a pattern
@c %**end of header

@c This file has the new style title page commands.
@c Run `makeinfo' rather than `texinfo-format-buffer'.

@c smallbook

@c tex
@c \overfullrule=0pt
@c end tex

@include version.texi

@c Combine indices.
@syncodeindex ky cp
@syncodeindex pg cp
@syncodeindex tp cp

@defcodeindex op
@syncodeindex op fn

@ifinfo
@direntry
* grep: (grep).                   print lines matching a pattern.
@end direntry
This file documents @sc{grep}, a pattern matching engine.


Published by the Free Software Foundation,
59 Temple Place - Suite 330
Boston, MA 02111-1307, USA

Copyright (C) 1998 Free Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

@ignore
Permission is granted to process this file through TeX and print the
results, provided the printed document carries copying permission
notice identical to this one except for the removal of this paragraph
(this paragraph not being relevant to the printed manual).

@end ignore
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the entire
resulting derived work is distributed under the terms of a permission
notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation approved
by the Foundation.
@end ifinfo

@setchapternewpage off

@titlepage
@title grep, searching for a pattern
@subtitle version @value{VERSION}, @value{UPDATED}
@author Alain et al.

@page
@vskip 0pt plus 1filll
Copyright @copyright{} 1998 Free Software Foundation, Inc.

@sp 2
Published by the Free Software Foundation, @*
59 Temple Place - Suite 330, @*
Boston, MA 02111-1307, USA

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the entire
resulting derived work is distributed under the terms of a permission
notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation approved
by the Foundation.

@end titlepage
@page


@node Top, Introduction, (dir), (dir)
@comment  node-name,  next,  previous,  up

@ifinfo
This document was produced for version @value{VERSION} of @sc{GNU} @sc{grep}.
@end ifinfo

@menu
* Introduction::                Introduction
* Options::                     Options
* Diagnosis::                   Diagnosis
* Grep Programs::               @sc{grep} programs
* Regular Expressions::         Regular Expressions
* Reporting Bugs::              Reporting Bugs
* Concept Index::               A menu with all the topics in this manual.
* Index::                       A menu with all @sc{grep} commands
                                 and command-line options.
@end menu


@node Introduction,  Options, Top, Top
@comment  node-name,  next,  previous,  up
@chapter Introduction

@cindex Searching for a pattern.
@sc{grep} searches the input files for lines containning a match to a given
pattern list. When a match is found the line is written to standard
ouput(default behaviour). @sc{grep} expects to do the matching on text,
since newline is also a separator for the list of patterns, there
is no way to match newline characters in a text.

@node Options, Diagnosis, Introduction, Top
@comment  node-name,  next,  previous,  up
@chapter Options

@sc{grep} comes with a rich set of options from POSIX.2 and GNU extensions.

@section POSIX.2

@sc{grep} may be invoked with the following command-line options:

@table @samp

@item -c
@itemx --count
@opindex -c
@opindex -count
@cindex counting lines
Suppress normal output; instead print a count of matching
lines for each input file.  With the -v, --revert-match option,
count non-matching lines.

@item -e @var{PATTERN}
@itemx --regexp=@var{PATTERN}
@opindex -e
@opindex --regexp=@var{PATTERN}
@cindex pattern list
Use PATTERN as the pattern; useful to protect  patterns
beginning with -.

@item  -f @var{FILE}
@itemx --file=@var{FILE}
@opindex  -f
@opindex  --file 
@itemx --file=@var{FILE}
@cindex pattern from file
Obtain patterns from FILE, one  per  line.   The  empty
file contains zero patterns, and therfore matches nothing.

@item -i
@itemx --ignore-case
@opindex -i
@opindex --ignore-case
@cindex case insensitive
Ignore case distinctions in both the  pattern  and  the input files.

@item -l
@itemx --files-with-matches
@opindex -l
@opindex --files-with-matches
@cindex name of files
Suppress normal output; instead print the name of  each input
file  from which output would normally have been printed.
The scanning will stop on the first match.

@item -n
@itemx --line-number
@opindex -n
@opindex --line-number
@cindex line numbering
Prefix each line of output with the line number  within its input file.

@item -q
@itemx --quiet
@itemx --silent
@opindex -q
@opindex --quiet
@opindex --silent
@cindex quiet, silent
Quiet; suppress normal output. The scanning  will  stop on  the
first match.  Also see the -s or --no-messages option.

@item -s
@itemx --no-messages
@opindex -s
@opindex --no-messages
@cindex suppress error messages
Suppress error messages about nonexistent or unreadable files.
Portability  note:  unlike  GNU grep, BSD grep does not comply
with POSIX.2, because BSD grep lacks  a -q  option and its -s option
behaves like GNU grep's -q option. Shell scripts intended to be portable
to  BSD grep  should  avoid  both -q and -s and should redirect
output to /dev/null instead.

@item -v
@itemx --revert-match
@opindex -v
@opindex --revert-match
@cindex revert matching
Invert the sense of matching,  to  select  non-matching lines.

@item -x
@itemx --line-regexp
@opindex -x
@opindex --line-regexp
@cindex match the whole line
Select only those matches that exactly match the  whole line.

@end table

@section GNU Extensions

@table @samp

@item -A @var{NUM}
@item --after-context=@var{NUM}
@opindex -A
@opindex --after-context
@cindex after context
Print NUM lines  of  trailing  context  after  matching lines.

@item -B @var{NUM}
@itemx --before-context=@var{NUM}
@opindex -B
@opindex --before-context
@cindex before context
Print NUM lines  of  leading  context  before  matching lines.

@item -C
@itemx --context@var{[=NUM]}
@opindex -C
@opindex --context
@cindex context
Print NUM lines (default 2) of output context.


@item -NUM
@opindex -NUM
Same as --context=NUM lines  of  leading  and  trailing
context.  However, grep will never print any given line more than once.


@item -V
@itemx --version
@opindex -V
@opindex --version
@cindex Version, printing
Print the version number of  @sc{grep}  to  standard  error.
This  version  number  should  be  included  in all bug reports.

@item -h
@itemx --help
@opindex -h
@opindex --help
@cindex Usage summary, printing
Print a usage message briefly summarizing these command-line options
and the bug-reporting address, then exit.

@item -b
@itemx --byte-offset
@opindex -b
@opindex --byte-offset
@cindex byte offset
Print the byte offset within the input file before each line of output.

@item -d @var{ACTION}
@itemx --directories=@var{ACTION}
@opindex -d 
@opindex --directories
@cindex directory search
If an input file is a directory, use ACTION to  process it.
By  default,  ACTION  is  read,  which means that directories are
read just  as  if  they  were  ordinary files. If  ACTION  is  skip,
directories are silently skipped.  If ACTION is recurse, grep  reads
all  files under  each  directory, recursively; this is equivalent
to the -r option.

@item -h
@itemx --no-filename
@opindex -h
@opindex --no-filename
@cindex no filename prefix
Suppress the prefixing of filenames on output when multiple files are searched.

@item -L
@itemx --files-without-match
@opindex -L
@opindex --files-without-match
@cindex files  without match
Suppress normal output; instead print the name of  each input
file  from  which  no output would normally have been printed.
The  scanning  will  stop  on  the  first match.

@item -a
@itemx --text
@opindex -a
@opindex --text
@cindex suppress binary data
Do not suppress output lines that contain binary  data.
Normally,  if  the  first  few bytes of a file indicate
that the file contains binary data, grep outputs only a
message saying that the file matches the pattern.  This
option causes grep to act as if  the  file  is  a  text
file, even if it would otherwise be treated as binary.

@item -w
@itemx --word-regexp
@opindex -w
@opindex --word-regexp
@cindex matching a word
Select only those lines containing  matches  that  form
whole  words.   The test is that the matching substring
must either be at the beginning of the  line,  or  preceded 
by a non-word constituent character.  Similarly,
it must be either at the end of the line or followed by
a  non-word  constituent  character.   Word-constituent
characters are letters, digits, and the underscore.

@item -y
@opindex -y
@cindex case insensitive
Obsolete synonym for -i.

@item -U
@itemx --binary
@opindex -U
@opindex --binary
@cindex DOS binary files
Treat the file(s) as binary.  By default, under  MS-DOS
and  MS-Windows,  grep guesses the file type by looking
at the contents of the first 32KB read from  the  file.
If  grep decides the file is a text file, it strips the
CR characters from the original file contents (to  make
regular  expressions  with  ^  and  $  work correctly).
Specifying -U overrules  this  guesswork,  causing  all
files  to  be read and passed to the matching mechanism
verbatim; if the file is a text file with  CR/LF  pairs
at  the  end of each line, this will cause some regular
expressions to fail.  This option is only supported  on
MS-DOS and MS-Windows.

@item -u
@itemx --unix-byte-offsets
@opindex -u
@opindex --unix-byte-offsets
@cindex DOS byte offsets
Report Unix-style byte  offsets.   This  switch  causes
grep  to  report byte offsets as if the file were Unix style
text file, i.e. with CR characters stripped  off.
This  will produce results identical to running grep on
a Unix machine.  This option has no  effect  unless  -b
option is also used; it is only supported on MS-DOS and
MS-Windows.

@end table

@sc{grep} uses the environment variable @var{LANG} to
provide internationalization suports, if compile with this feature.

@node Diagnosis, Grep Programs, Options, Top
@comment  node-name,  next,  previous,  up
Normally, exit status is 0 if matches were found, and 1 if no matches
were found (The -v option inverts the sense of the exit status).
Exit status is 2  if  there  were  syntax errors  in  the  pattern,
inaccessible input files, or other system errors.

@node Grep Programs, Regular Expressions, Diagnosis, Top
@comment  node-name,  next,  previous,  up
@chapter @sc{grep} programs

@sc{grep} searches the named input files (or standard input if no
files are named, or the file name - is given) for lines containing
a match to the  given  pattern.   By  default,  grep prints the matching lines.
There are three major variants of grep,  controlled  by  the following options.

@table @samp

@item -G
@itemx --basic-regexp
@opindex -G
@opindex --basic-regexp
@cindex Basic Regular Expression
Interpret pattern as a basic  regular  expression.  This is the default.

@item -E
@item --extended-regexp
@opindex -E
@opindex --extended-regexp
@cindex Extended Regular Expression
Interpret pattern as  an  extended  regular  expression.


@item -F
@itemx --fixed-strings
@opindex -F
@opindex --fixed-strings
@cindex Fixed Strings
Interpret pattern as a list of fixed strings, separated
by newlines, any of which is to be matched.
In addition, two variant programs @sc{egrep} and @sc{fgrep} are available.
@sc{egrep} is similar (but not identical) to @sc{grep -E}, and
is compatible with the historical Unix egrep.  @sc{fgrep} is  the
same as @sc{grep -F}.

@end table

@node Regular Expressions, Reporting Bugs, Grep Programs, Top
@comment  node-name,  next,  previous,  up
@chapter Regular Expressions

A regular expression is a pattern that describes  a  set  of strings.
Regular expressions are constructed analogously to arithmetic expressions,
by using various operators  to  combine smaller expressions.
@sc{grep} understands two different versions of  regular  expression
syntax:   ``basic''  and  ``extended''. In GNU @sc{grep}, there is no
difference  in  available  functionality  using either  syntax. 
In  other  implementations,  basic regular expressions are less powerful.
The  following  description applies  to  extended  regular  expressions;
differences for basic regular expressions are summarized afterwards.
The fundamental building blocks are the regular  expressions that  match
a single character.  Most characters, including all letters and digits,
are regular expressions  that  match themselves. Any  metacharacter
with special meaning may be quoted by preceding it with a backslash.
A list of characters enclosed by [ and ] matches any  single character
in  that list; if the first character of the list is the caret ^ then it
matches  any  character  not  in  the list.  For  example,  the  regular
expression [0123456789] matches any single digit.
A range of ASCII  characters  may be  specified  by  giving  the  first
and  last characters, separated by a hyphen.  Finally, certain  named
classes  of characters  are  predefined.   Their names are self explanatory,
and  they  are :

@table @samp

@item [:alnum:]
@opindex [:alnum:] 
@cindex  alphanumeric class
Any of [:digit:] or [:alpha:]

@item [:alpha:]
@opindex [:alpha:]
@cindex alphabetic class
Any local-specific or
a b c d e f g h i j k l m n o p q r s t u v w x y z, 
A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

@item [:cntrl:]
@opindex [:cntrl:]
@cindex control char
Any of BEL BS CR FF HT NL VT

@item [:digit:]
@opindex [:digit:]
@cindex digit class
Any of 0 1 2 3 4 5 6 7 8 9

@item [:graph:]
@opindex [:graph:]
@cindex graphic class
Anything that is not a [:alphanum:] or [:punct:]

@item [:lower:]
@opindex [:lower:]
@cindex class lower
Any a b c d e f g h i j k l m n o p q r s t u v w x y z, 

@item [:print:]
@opindex [:print:]
@cindex printable class
Any [:space:] or not [:isgraph:]

@item [:punct:]
@opindex [:punct:]
@cindex punctuation class
Any ! " #% & ' ( ) ; < = > ? [ \ ] * + , - . / : ^ _ @{ | @}


@item [:space:]
@opindex [:space:]
@cindex space class
any CR FF HT NL VT space

@item [:upper:]
@opindex [:upper:]
@cindex upper class
Any A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

@item [:xdigit:]
@opindex [:xdigit:]
@cindex xdigit class
any a b c d e f A B C D E F 0 1 2 3 4 5 6 7 8 9

@end table
For   example, [[:alnum:]]  means  [0-9A-Za-z],  except  the latter
form is dependent upon the ASCII  character  encoding,  whereas  the
former  is portable.  (Note that the brackets in these class names are
part of the symbolic names, and must  be  included in  addition  to
the brackets delimiting the bracket list).  Most metacharacters lose
their special meaning inside lists. To  include  a  literal ] place it
first in the list.  Similarly, to include a literal ^ place it anywhere
but  first.  Finally, to include a literal - place it last.

The period . matches any single character.  The symbol \w is a synonym 
for  [[:alnum:]]  and  \W  is  a  synonym  for [^[:alnum]].

The caret ^ and the dollar sign $  are  metacharacters  that
respectively match the empty string at the beginning and end
of a line.  The symbols \< and  \>  respectively  match  the
empty string at the beginning and end of a word.  The symbol
\b matches the empty string at the edge of a  word,  and  \B
matches  the empty string provided it's not at the edge of a word.

A regular expression may  be  followed  by  one  of  several
repetition operators:


@table @samp

@item ?
@opindex ?
@cindex question mark
The preceding item is  optional  and  matched  at  most once.

@item *
@opindex *
@cindex asterik
The preceding item will be matched zero or more times.

@item +
@opindex +
@cindex plus sign 
The preceding item will be matched one or more times.

@item @{n@}
@opindex @{n@}
@cindex brackets
The preceding item is matched exactly n times.

@item @{n,@}
@opindex @{n,@}
@cindex brackets
The preceding item is matched n or more times.

@item @{,m@}
@opindex @{,m@}
@cindex brackets
The preceding item is optional and is matched at most m times.

@item @{n,m@}
@opindex @{n,m@}
@cindex brackets
The preceding item is matched at least n times, but not more than m times.

@end table

Two regular expressions may be concatenated;  the  resulting regular
expression matches any string formed by concatenating two substrings
that respectively match the  concatenated subexpressions.

Two regular expressions may be joined by the infix  operator |; the
resulting  regular  expression  matches  any string matching either
subexpression.

Repetition takes precedence  over  concatenation,  which  inturn
takes precedence over alternation.  A whole subexpression may be
enclosed in parentheses to override  these  precedence rules.

The backreference \n, where n is a single digit, matches the
substring previously matched by the nth parenthesized subexpression
of the regular expression.

In basic regular expressions the metacharacters ?, +, @{,  |,
(,  and  )  lose  their  special  meaning;  instead  use the
backslashed versions \?, \+, \@{, \|, \(, and \).

In @sc{egrep} the metacharacter  @{  loses  its  special  meaning;
instead use \@{. This not true for @sc{grep -E}.


@node Reporting Bugs, Concept Index, Regular Expressions, Top
@comment  node-name,  next,  previous,  up
@chapter Reporting bugs

@cindex Bugs, reporting
Email bug reports to @email{bug-gnu-utils@@gnu.org}.
Be sure to include the word ``grep'' somewhere in the ``Subject:'' field.
Large repetition counts in the  @{m,n@}  construct  may  cause
grep  to  use  lots  of  memory.  In addition, certain other
obscure regular expressions  require  exponential  time  and
space, and may cause grep to run out of memory.
Backreferences are very slow, and  may  require  exponential time.

@page
@node Concept Index , Index, Reporting Bugs, Top
@comment  node-name,  next,  previous,  up
@unnumbered Concept Index

This is a general index of all issues discussed in this manual, with the
exception of the @sc{grep} commands and command-line options.

@printindex cp

@page
@node Index, , Concept Index, Top
@unnumbered Index

This is an alphabetical list of all @sc{grep} commands and command-line
opions.

@printindex fn

@contents
@bye
